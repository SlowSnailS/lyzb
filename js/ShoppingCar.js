"use strict";define(["jquery","cookie"],function(){function c(t,i,c){var n=$.cookie("car");if(n=JSON.parse(n),t){for(var a=0;a<n.length;a++)if(n[a].id==i)return console.log(c),n[a].num=c,n=JSON.stringify(n),void $.cookie("car",n)}else for(var d=0;d<n.length;d++)if(n[d].id==i)return n.splice(d,1),n=JSON.stringify(n),void $.cookie("car",n)}function n(){var n=0,a=0;$(".ui-grid-cont").children().each(function(){var t=$(this).find(".pcb")[0].checked,i=$(this).find("#pri24061").html().substring(1)-0,c=$(this).find(".proqty").val()-0;$(this).find(".propri").html("￥"+(i*c).toFixed(2)),t&&(n+=i*c,a+=c)}),$("#TotalQty").html(a),$("#TotalPrice").html("￥"+n.toFixed(2))}var t=$.cookie("car"),i="";t=JSON.parse(t);for(var a=0;a<t.length;a++){i+="<tr id="+t[a].id+'>\n\t\t\t\t\t\t\t\t\t\t<td class="fn-clear">\n\t\t\t\t\t\t\t\t\t\t\t<input id='+t[a].id+' type="checkbox" class="ui-checkbox J-checkbox pcb" value='+t[a].id+' checked="checked" data-sid="1132" >\n\t\t\t\t\t\t\t\t\t\t\t<a class="fn-left product-img" href="/pro24061.html">\n\t\t\t\t\t\t\t\t\t\t\t\t<img src='+t[a].imgSrc+' width="72" height="72">\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t<div class="fn-left ml10">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="product-name" style="height:60px;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="/pro24061.html">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'+t[a].description+'\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label style="color:red;">'+t[a].iscount+'</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td id="pri24061">￥'+t[a].prices+'</td>\n\t\t\t\t\t\t\t\t\t\t<td class="">\n\t\t\t\t\t\t\t\t\t\t\t<div class="num-count fn-clear">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="btn-minus"  data-pid='+t[a].id+' data-sid="1132" data-cid="97364">-</a>\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="ui-input num-count-inp J-digitalinput-target proqty" id="Qty24061" value='+t[a].num+" data-pid="+t[a].id+' data-sid="1132" data-cid="97364" >\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="btn-add" " data-pid='+t[a].id+' data-sid="1132" data-cid="97364">+</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class="fc-orange propri propri1132" id="spri24061">￥'+t[a].prices+'</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" >移入收藏夹</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<a class ="del" href="javascript:;"  data-sid="1132" data-pid='+t[a].id+">删除</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>"}$("#list").html(i),n(),console.log(1),$(".btn-minus").on("click",function(t){var i=$(this).next().val()-1;i<1||($(this).next().val(i),n())}),$(".btn-add").on("click",function(t){var i=$(this).prev().val()-0+1;$(this).prev().val(i),n(),c(!0,$(this).attr("data-pid"),i)}),$("#J-checkbox-all,#J-checkbox-all-bottom").on("click",function(){$("#J-checkbox-all")[0].checked=this.checked,$("#J-checkbox-all-bottom")[0].checked=this.checked;for(var t=0;t<$(".pcb").length;t++)$(".pcb")[t].checked=this.checked;n()}),$(".proqty").on("blur",function(){var t=$(this).val();t=parseInt(t),(isNaN(t)||t<1)&&(t=1),$(this).val(t),n(),c(!0,$(this).attr("data-pid"),t)}),$(".pcb").on("click",function(){n()}),$(".del").on("click",function(){c(!1,$(this).attr("data-pid")),$(this).parent().parent().parent().remove(),n()}),$("#dls").on("click",function(){$(".ui-grid-cont").children().each(function(){$(this).find(".pcb")[0].checked&&(c(!1,this.id),this.remove())})})});